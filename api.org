#+title: tax api documentation

[[./schema.png]]

** general format of all successful responses

#+begin_src json
  {
    "slice, aka table": {
      "record id": {
        "column name": "column value",
        "another column name": "another column value"
      }
    }
  }
#+end_src

** "king" == "user"
"user" is a reserved word in psql, which needs to be quoted. since
this project is generating sql with libraries, it uses "king" to avoid
having to generate sql with quotes in it.

** king authentication/authorization

*** all endpoints that require authentication

all endpoints that require a king to be logged in

  + request: endpoints that require authentication
  + error response
    #+begin_src verb
      http/1.1 401 unauthorized
      content-type: application/json

      {
        "message": "authentication required"
      }
    #+end_src

*** all endpoints that require authorization

all endpoints that require authentication and the current king does
not have the correct role(s) or permission(s).

  + response:
    #+begin_src verb
      http/1.1 403 forbidden
      content-type: application/json

      {"message":"forbidden"}
    #+end_src

